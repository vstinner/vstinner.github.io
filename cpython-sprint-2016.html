<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>CPython sprint, september 2016 — Victor Stinner blog 3</title>
	<meta name="description" content="Title: CPython sprint, september 2016; Date: 2017-02-14; Author: Victor Stinner">
	<meta name="author" content="Victor Stinner">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="https://vstinner.github.io/theme/html5.js"></script>
		<![endif]-->
	<link href="https://vstinner.github.io/theme/css/ipython.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/bootswatch/3.2.0/simplex/bootstrap.min.css" rel="stylesheet">
	<link href="https://vstinner.github.io/theme/css/local.css" rel="stylesheet">
	<link href="https://vstinner.github.io/theme/css/pygments.css" rel="stylesheet">
</head>
<body>
<div class="container">
	<div class="page-header">
		<h1><a href="https://vstinner.github.io/">Victor Stinner blog 3</a>
			<br>	</div>
	<div class="row">
		<div class="col-md-8 col-md-offset-2">
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="text-center article-header">
		<h1 itemprop="name headline" class="article-title">CPython sprint, september 2016</h1>
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<h4 itemprop="name">Victor Stinner</h4>
		</span>
		<time datetime="2017-02-14T18:00:00+01:00" itemprop="datePublished">mar. 14 février 2017</time>
	</div>
	<div>
		Category:
		<span itemprop="articleSection">
			<a href="https://vstinner.github.io/category/python.html" rel="category">python</a>
		</span>
	</div>
 
	<div>
		Tags:
		<span itemprop="keywords">
			<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
		</span>
	</div>
	<div itemprop="articleBody" class="article-body"><p>I was invited at my first CPython sprint in September! Five days, September
5-9, at Instagram office in California, USA. The sprint was sponsored by
Instagram, Microsoft, and the PSF.</p>
<p><strong>First little game:</strong> Many happy faces, but <em>Where is Victor?</em></p>
<a class="reference external image-reference" href="http://blog.python.org/2016/09/python-core-development-sprint-2016-36.html"><img alt="CPython developers at the Facebook sprint" src="https://vstinner.github.io/images/cpython_sprint_2016_photo.jpg" /></a>
<p>IMHO it was the most productive CPython week ever :-) Having Guido van Rossum
in a room helped to get many PEPs accepted. Having a lot of highly skilled
reviewers in the same room helped to get many new features and many PEP
implementations merged much faster than usual.</p>
<p><strong>Second little game:</strong> try to spot the sprint on the CPython commit statistics of
the last 12 months (Feb, 2016-Feb, 2017) ;-)</p>
<a class="reference external image-reference" href="https://github.com/python/cpython/graphs/commit-activity"><img alt="CPython commits statistics" src="https://vstinner.github.io/images/cpython_sprint_2016_commits.png" /></a>
<div class="section" id="compact-dict">
<h2>Compact dict</h2>
<p>Issue #27350: I reviewed and pushed the &quot;compact dict&quot; implementation which
makes Python dictionaries ordered (by insertion order) by default. It reduces
the memory usage of dictionaries betwen 20% and 25%.</p>
<p>The implementation was written by INADA Naoki, based on the PyPy
implementation, with a design by Raymond Hettinger.</p>
</div>
<div class="section" id="fastcall">
<h2>FASTCALL</h2>
<p>&quot;Fast calls&quot;: Python 3.6 has a new private C API and a new METH_FASTCALL
calling convention which avoids temporary tuple for positional arguments and
avoids temporary dictionary for keyword arguments. Changes:</p>
<ul class="simple">
<li>Add a new C calling convention: METH_FASTCALL</li>
<li>Add _PyArg_ParseStack() function</li>
<li>Add _PyCFunction_FastCallKeywords() function: issue #27810</li>
<li>Add _PyObject_FastCallKeywords() function: issue #27830</li>
</ul>
</div>
<div class="section" id="more-efficient-call-function-bytecode">
<h2>More efficient CALL_FUNCTION bytecode</h2>
<p>I reviewed and pushed: &quot;Rework CALL_FUNCTION* opcodes to produce shorter and
more efficient bytecode&quot; (issue #27213).</p>
<p>Patch writen by Demur Rumed, design by Serhiy Storchaka, reviewed by Serhiy
Storchaka and me.</p>
</div>
<div class="section" id="pep-509-add-a-private-version-to-dict">
<h2>PEP 509: Add a private version to dict</h2>
<p>Guido approved my PEP 509 &quot;Add a new private version to the builtin dict type&quot;.</p>
<p>I pushed the implementation.</p>
</div>
<div class="section" id="pep-524-make-os-urandom-blocking-on-linux">
<h2>PEP 524: Make os.urandom() blocking on Linux</h2>
<p>I pushed the implementation of my PEP 524: &quot;Make os.urandom() blocking on
Linux&quot;.</p>
<p>Issue #27776: The os.urandom() function does now block on Linux 3.17 and newer
until the system urandom entropy pool is initialized to increase the security.</p>
<p>Read my previous blog post for the painful story behind the PEP:
<a class="reference external" href="https://vstinner.github.io/pep-524-os-urandom-blocking.html">PEP 524: os.urandom() now blocks on Linux</a>.</p>
</div>
<div class="section" id="asynchronous-pep-525-and-530">
<h2>Asynchronous PEP 525 and 530</h2>
<p>Guido van Rossum approved two PEPs of Yury Selivanov:</p>
<ul class="simple">
<li>PEP 525: Asynchronous Generators</li>
<li>PEP 530: Asynchronous Comprehensions</li>
</ul>
<p>I reviewed the huge C implementation with Yury on my side :-)</p>
</div>
<div class="section" id="unicode-escape-codec-optimization">
<h2>unicode_escape codec optimization</h2>
<p>I reviewed and pushed &quot;Optimize unicode_escape and raw_unicode_escape&quot; (the
isue #16334), patch written by Serhiy Storchaka.</p>
</div>
<div class="section" id="python-3-6-bugfixes">
<h2>Python 3.6 bugfixes</h2>
<p>I happily found many issues including a major one: regular list-comprehension
were completely broken :-)</p>
<p>Another minor issue: SyntaxError didn't reported the correct line number in a
specific case.</p>
<p>Don't worry, Yury fixed both ;-)</p>
</div>
<div class="section" id="official-sprint-report">
<h2>Official sprint report</h2>
<p>Read also the official report: <a class="reference external" href="http://blog.python.org/2016/09/python-core-development-sprint-2016-36.html">Python Core Development Sprint 2016: 3.6 and
beyond!</a>.</p>
</div>
</div>
	<hr>
	<h2>Comments</h2>
</div>
		</div>
	</div> 	<!-- <hr> -->
</div> <!-- /container -->
<footer class="aw-footer bg-danger">
	<div class="container"> <!-- footer -->
		<div class="row">
			<div class="col-md-10 col-md-offset-1">
				<div class="row">
					<div class="col-md-3">
						<h4>Navigation</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="https://vstinner.github.io">Victor Stinner blog 3</a></li>
							<li><a href="https://vstinner.github.io/feeds/all.atom.xml" type="application/atom+xml"><i class="fa fa-rss "></i> atom</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Author</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="https://twitter.com/VictorStinner">Follow @VictorStinner on Twitter</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Categories</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="https://vstinner.github.io/category/benchmark.html">benchmark (8)</a></li>
							<li><a href="https://vstinner.github.io/category/cpython.html">cpython (19)</a></li>
							<li><a href="https://vstinner.github.io/category/linux.html">linux (2)</a></li>
							<li><a href="https://vstinner.github.io/category/python.html">python (41)</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Links</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="http://vstinner.readthedocs.org/">Victor Stinner's Notes</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</footer>
<div class="container">
	<div class="row">
		<div class="col-md-12 text-center center-block aw-bottom">
			<p>&copy; Victor Stinner 2016</p>
			<p>Powered by Pelican</p>
		</div>
	</div>
</div>
<!-- JavaScript -->
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
	$("div.collapseheader").click(function () {
		$header = $(this).children("span").first();
		$codearea = $(this).children(".input_area");
		$codearea.slideToggle(500, function () {
			$header.text(function () {
				return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
			});
		});
	});
});
</script>
</body>
</html>