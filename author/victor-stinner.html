<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Victor Stinner blog 3 <small>Victor Stinner</small></title>
	<meta name="description" content="Coding, scientific development, finance, data analysis, visualization, statistics, and machine learning">
	<meta name="author" content="Victor Stinner">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="https://vstinner.github.io/theme/html5.js"></script>
		<![endif]-->
	<link href="https://vstinner.github.io/theme/css/ipython.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/bootswatch/3.2.0/simplex/bootstrap.min.css" rel="stylesheet">
	<link href="https://vstinner.github.io/theme/css/local.css" rel="stylesheet">
	<link href="https://vstinner.github.io/theme/css/pygments.css" rel="stylesheet">
</head>
<body>
<div class="container">
	<div class="page-header">
		<h1><a href="https://vstinner.github.io/">Victor Stinner blog 3</a>
			<br>	</div>
	<div class="row">
		<div class="col-md-8 col-md-offset-2">
        
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/isolate-subinterpreters.html">
		<h2 itemprop="name headline">Isolate Python Subinterpreters</h2>
	</a>
	<time datetime="2020-12-27T22:00:00+01:00" itemprop="datePublished">dim. 27 décembre 2020</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><img alt="Christmas gift." src="https://vstinner.github.io/images/christmas-gift.jpg" />
<p>This article is about the work done in Python in 2019 and 2020 to better
isolate subinterpreters. Static types are converted to heap types, extension
modules are converted to use the new multiphase initialization API (PEP 489),
caches, states, singletons and free lists are made per-interpreter, many bugs
have been …</p></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/cpython.html" rel="category">cpython</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/subinterpreters.html" rel="tag">subinterpreters</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/hide-implementation-details-python-c-api.html">
		<h2 itemprop="name headline">Hide implementation details from the Python C API</h2>
	</a>
	<time datetime="2020-12-25T22:00:00+01:00" itemprop="datePublished">ven. 25 décembre 2020</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><img alt="My cat attacking the Python C API" src="https://vstinner.github.io/images/pepsie.jpg" />
<p>This article is the history of Python C API discussions over the last 4 years,
and the creation of C API projects: <a class="reference external" href="https://pythoncapi.readthedocs.io/">pythoncapi website</a>, <a class="reference external" href="https://github.com/pythoncapi/pythoncapi_compat">pythoncapi_compat.h header file</a> and <a class="reference external" href="https://hpy.readthedocs.io/">HPy (new clean C API)</a>. More and more people are aware of issues
caused by the C API and are working …</p></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/cpython.html" rel="category">cpython</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/optimization.html" rel="tag">optimization</a>
	</span>
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/c-api.html" rel="tag">c-api</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/subinterpreter-leaks.html">
		<h2 itemprop="name headline">Leaks discovered by subinterpreters</h2>
	</a>
	<time datetime="2020-12-23T14:00:00+01:00" itemprop="datePublished">mer. 23 décembre 2020</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><p>This article is about old reference leaks discovered or caused by the work on
isolating subinterpreters: leaks in 6 different modules (gc, _weakref, _abc,
_signal, _ast and _thread).</p>
<img alt="_thread GC bug" src="https://vstinner.github.io/images/thread_gc_bug.jpg" />
<div class="section" id="refleaks-buildbot-failures">
<h2>Refleaks buildbot failures</h2>
<p>With my work on isolating subinterpreters, old bugs about Python objects leaked
at Python exit are suddenly becoming blocker …</p></div></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/cpython.html" rel="category">cpython</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/subinterpreters.html" rel="tag">subinterpreters</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/gil-bugfixes-daemon-threads-python39.html">
		<h2 itemprop="name headline">GIL bugfixes for daemon threads in Python 3.9</h2>
	</a>
	<time datetime="2020-04-04T22:00:00+02:00" itemprop="datePublished">sam. 04 avril 2020</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><a class="reference external image-reference" href="https://twitter.com/Bouletcorp/status/1241018332112998401"><img alt="`#CoronaMaison by Boulet" src="https://vstinner.github.io/images/coronamaison_boulet.jpg" /></a>
<p>My previous article <a class="reference external" href="https://vstinner.github.io/daemon-threads-python-finalization-python32.html">Daemon threads and the Python finalization in Python 3.2 and 3.3</a> introduces
issues caused by daemon threads in the Python finalization and past changes to
make them work.</p>
<p>This article is about bugfixes of the infamous GIL (Global Interpreter Lock) in
Python 3.9, between …</p></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/cpython.html" rel="category">cpython</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/subinterpreters.html" rel="tag">subinterpreters</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/threading-shutdown-race-condition.html">
		<h2 itemprop="name headline">Threading shutdown race condition</h2>
	</a>
	<time datetime="2020-04-03T20:00:00+02:00" itemprop="datePublished">ven. 03 avril 2020</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><p>This article is about a race condition in threading shutdown that I fixed in
Python 3.9 in March 2019. I also forbid spawning daemon threads in
subinterpreters to fix another related bug.</p>
<a class="reference external image-reference" href="https://twitter.com/neeljulien/status/1240292383369150464"><img alt="#CoronaMaison by Julien Neel" src="https://vstinner.github.io/images/coronamaison_jneel.jpg" /></a>
<p>Drawing: <a class="reference external" href="https://twitter.com/neeljulien/status/1240292383369150464">#CoronaMaison by Julien Neel</a>.</p>
<div class="section" id="race-condition-in-threading-shutdown">
<h2>Race condition in threading shutdown</h2>
<div class="section" id="random-test-failure-noticed-on-freebsd-buildbot">
<h3>Random test failure noticed on FreeBSD buildbot …</h3></div></div></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/cpython.html" rel="category">cpython</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/subinterpreters.html" rel="tag">subinterpreters</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/daemon-threads-python-finalization-python32.html">
		<h2 itemprop="name headline">Daemon threads and the Python finalization in Python 3.2 and 3.3</h2>
	</a>
	<time datetime="2020-03-26T22:00:00+01:00" itemprop="datePublished">jeu. 26 mars 2020</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><a class="reference external image-reference" href="https://twitter.com/LuppiChan/status/1240346448606171136"><img alt="#CoronaMaison by Luppi" src="https://vstinner.github.io/images/coronamaison_luppi.jpg" /></a>
<p>At exit, the Python finalization calls Python objects finalizers (the
<tt class="docutils literal">__del__()</tt> method) and deallocates memory.  The daemon threads are a special
kind of threads which continue to run during and after the Python finalization.
They are causing race conditions and tricky bugs in the Python finalization.</p>
<p>This article covers bugs …</p></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/cpython.html" rel="category">cpython</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/subinterpreters.html" rel="tag">subinterpreters</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/python37-dev-mode.html">
		<h2 itemprop="name headline">Python 3.7 Development Mode</h2>
	</a>
	<time datetime="2020-01-16T12:00:00+01:00" itemprop="datePublished">jeu. 16 janvier 2020</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><a class="reference external image-reference" href="https://twitter.com/guinoir/status/1217146968029331456"><img alt="Ready to race" src="https://vstinner.github.io/images/ready_to_race.jpg" /></a>
<p>This article describes the discussion on the design of the <a class="reference external" href="https://docs.python.org/dev/using/cmdline.html#id5">development mode
(-X dev)</a> that I <strong>added
to Python 3.7</strong> and how it has been implemented.</p>
<p>The development mode enables runtime checks which are too expensive to be
enabled by default. It can be enabled by <tt class="docutils literal">python3 <span class="pre">-X</span> dev …</tt></p></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/python.html" rel="category">python</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/cpython-pass-tstate.html">
		<h2 itemprop="name headline">Pass the Python thread state explicitly</h2>
	</a>
	<time datetime="2020-01-08T15:00:00+01:00" itemprop="datePublished">mer. 08 janvier 2020</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><img alt="Python C API" src="https://vstinner.github.io/images/capi.jpg" />
<div class="section" id="keeping-python-competitive">
<h2>Keeping Python competitive</h2>
<p>I'm trying to find ways to make Python more efficient for many years, see for
example my discussion at the Language Summit during Pycon US 2017: <a class="reference external" href="https://lwn.net/Articles/723949/">Keeping
Python competitive</a> (LWN article); <a class="reference external" href="https://github.com/vstinner/talks/blob/master/2017-PyconUS/summit.pdf">slides</a>.
At EuroPython 2019 (Basel), I gave the keynote &quot;Python Performance: Past,
Present and Future&quot;: <a class="reference external" href="https://github.com/vstinner/talks/blob/master/2019-EuroPython/python_performance.pdf">slides …</a></p></div></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/python.html" rel="category">python</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/graphics-bugs-firefox-gnome.html">
		<h2 itemprop="name headline">Graphics bugs in Firefox and GNOME</h2>
	</a>
	<time datetime="2019-10-10T17:00:00+02:00" itemprop="datePublished">jeu. 10 octobre 2019</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><p>After explaining how to <a class="reference external" href="https://vstinner.github.io/debug-hybrid-graphics-issues-linux.html">Debug Hybrid Graphics issues on Linux</a>, here is the story of four graphics bugs
that I had in GNOME and Firefox on my Fedora 30 between May 2018 and September
2019: bugs in gnome-shell, Gtk, Firefox and mutter.</p>
<a class="reference external image-reference" href="https://www.flickr.com/photos/34298393&#64;N06/14488759356/"><img alt="Glitch" src="https://vstinner.github.io/images/glitch.jpg" /></a>
<div class="section" id="gnome-shell-freezes">
<h2>gnome-shell freezes</h2>
<p>In May 2018, six months after …</p></div></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/linux.html" rel="category">linux</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/linux.html" rel="tag">linux</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/debug-hybrid-graphics-issues-linux.html">
		<h2 itemprop="name headline">Debug Hybrid Graphics issues on Linux</h2>
	</a>
	<time datetime="2019-09-11T15:50:00+02:00" itemprop="datePublished">mer. 11 septembre 2019</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><p><a class="reference external" href="https://wiki.archlinux.org/index.php/Hybrid_graphics">Hybrid Graphics</a> is a
complex hardware and software solution to achieve longer laptop battery life:
an <strong>integrated</strong> graphics device is used by default, and a <strong>discrete</strong>
graphics device with higher graphics performances is enabled on demand.</p>
<a class="reference external image-reference" href="https://www.theregister.co.uk/2010/02/09/inside_nvidia_optimus/"><img alt="Hybrid Graphics" src="https://vstinner.github.io/images/hybrid_graphics.jpg" /></a>
<p>If it is designed and implemented carefully, users should not notice that a
laptop …</p></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/linux.html" rel="category">linux</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/linux.html" rel="tag">linux</a>
	</span>
</div>
<hr>
 <div class="pagination">
<ul>
    <li class="prev disabled"><a href="#">&larr; Previous</a></li>

    <li class="active"><a href="https://vstinner.github.io/author/victor-stinner.html">1</a></li>
    <li class=""><a href="https://vstinner.github.io/author/victor-stinner2.html">2</a></li>
    <li class=""><a href="https://vstinner.github.io/author/victor-stinner3.html">3</a></li>
    <li class=""><a href="https://vstinner.github.io/author/victor-stinner4.html">4</a></li>
    <li class=""><a href="https://vstinner.github.io/author/victor-stinner5.html">5</a></li>
    <li class=""><a href="https://vstinner.github.io/author/victor-stinner6.html">6</a></li>
    <li class=""><a href="https://vstinner.github.io/author/victor-stinner7.html">7</a></li>

    <li class="next"><a href="https://vstinner.github.io/author/victor-stinner2.html">Next &rarr;</a></li>

</ul>
</div> 		</div>
	</div> 	<!-- <hr> -->
</div> <!-- /container -->
<footer class="aw-footer bg-danger">
	<div class="container"> <!-- footer -->
		<div class="row">
			<div class="col-md-10 col-md-offset-1">
				<div class="row">
					<div class="col-md-3">
						<h4>Navigation</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="https://vstinner.github.io">Victor Stinner blog 3</a></li>
							<li><a href="https://vstinner.github.io/feeds/all.atom.xml" type="application/atom+xml"><i class="fa fa-rss "></i> atom</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Author</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="https://twitter.com/VictorStinner">Follow @VictorStinner on Twitter</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Categories</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="https://vstinner.github.io/category/benchmark.html">benchmark (8)</a></li>
							<li><a href="https://vstinner.github.io/category/cpython.html">cpython (12)</a></li>
							<li><a href="https://vstinner.github.io/category/linux.html">linux (2)</a></li>
							<li><a href="https://vstinner.github.io/category/python.html">python (41)</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Links</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="http://vstinner.readthedocs.org/">Victor Stinner's Notes</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</footer>
<div class="container">
	<div class="row">
		<div class="col-md-12 text-center center-block aw-bottom">
			<p>&copy; Victor Stinner 2016</p>
			<p>Powered by Pelican</p>
		</div>
	</div>
</div>
<!-- JavaScript -->
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
	$("div.collapseheader").click(function () {
		$header = $(this).children("span").first();
		$codearea = $(this).children(".input_area");
		$codearea.slideToggle(500, function () {
			$header.text(function () {
				return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
			});
		});
	});
});
</script>
</body>
</html>