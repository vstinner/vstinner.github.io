<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Victor Stinner blog 3</title>
	<meta name="description" content="Coding, scientific development, finance, data analysis, visualization, statistics, and machine learning">
	<meta name="author" content="Victor Stinner">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="https://vstinner.github.io/theme/html5.js"></script>
		<![endif]-->
	<link href="https://vstinner.github.io/theme/css/ipython.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/bootswatch/3.2.0/simplex/bootstrap.min.css" rel="stylesheet">
	<link href="https://vstinner.github.io/theme/css/local.css" rel="stylesheet">
	<link href="https://vstinner.github.io/theme/css/pygments.css" rel="stylesheet">
</head>
<body>
<div class="container">
	<div class="page-header">
		<h1><a href="https://vstinner.github.io/">Victor Stinner blog 3</a>
			<br>	</div>
	<div class="row">
		<div class="col-md-8 col-md-offset-2">
        
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/pyunicodewriter-c-api.html">
		<h2 itemprop="name headline">Add PyUnicodeWriter C API</h2>
	</a>
	<time datetime="2024-07-04T18:00:00+02:00" itemprop="datePublished">Thu 04 July 2024</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><img alt="La Danse - Matisse" src="https://vstinner.github.io/images/matisse_la_danse.jpg" />
<p>In May, I designed a new C API to build a Python str object: the
<a class="reference external" href="https://docs.python.org/dev/c-api/unicode.html#pyunicodewriter">PyUnicodeWriter API</a>.
Many people were involved in the design and the discussion
was quite long. The C API Working Group helped to design a better and more
convenient API. It took me basically a whole …</p></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/cpython.html" rel="category">cpython</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/c-api.html" rel="tag">c-api</a>
	</span>
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/status-limited-c-api-march-2024.html">
		<h2 itemprop="name headline">Status of the Python Limited C API (March 2024)</h2>
	</a>
	<time datetime="2024-03-20T17:00:00+01:00" itemprop="datePublished">Wed 20 March 2024</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><a class="reference external image-reference" href="https://danielazconegui.com/en/prints/ghibli-spyrited-away.html"><img alt="Ghibli - Spirited Away" src="https://vstinner.github.io/images/ghibli-spyrited-away.jpg" /></a>
<p>In Python 3.13, I made multiple enhancements to make the limited C API more
usable:</p>
<ul class="simple">
<li>Add 14 functions to the limited C API.</li>
<li>Make the special debug build <tt class="docutils literal">Py_TRACE_REFS</tt> compatible with the limited
C API.</li>
<li>Enhance Argument Clinic to generate C code using the limited C API.</li>
<li>Add an …</li></ul></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/cpython.html" rel="category">cpython</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/c-api.html" rel="tag">c-api</a>
	</span>
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/remove-c-api-funcs-313.html">
		<h2 itemprop="name headline">Remove private C API functions</h2>
	</a>
	<time datetime="2023-12-15T23:00:00+01:00" itemprop="datePublished">Fri 15 December 2023</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><a class="reference external image-reference" href="https://en.wikipedia.org/wiki/The_Seasons_(Mucha)"><img alt="Mucha paintaing: the 4 seasons" src="https://vstinner.github.io/images/mucha_seasons.jpg" /></a>
<p>In Python 3.13 alpha 1, I removed more than 300 private C API functions. Even
if I announced my plan early in July, users didn't &quot;embrace&quot; my plan and didn't
agree with the rationale. I reverted 50 functions in the alpha 2 release to
calm down the situation and …</p></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/cpython.html" rel="category">cpython</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/c-api.html" rel="tag">c-api</a>
	</span>
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/c-api-dict-getitemref.html">
		<h2 itemprop="name headline">Design the API of a new PyDict_GetItemRef() function</h2>
	</a>
	<time datetime="2023-11-16T20:00:00+01:00" itemprop="datePublished">Thu 16 November 2023</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><p>Last June, I proposed adding a new <tt class="docutils literal">PyDict_GetItemRef()</tt> function to Python
3.13 C API. Every aspect of the API design was discussed in length. I will
explain how the API was designed, to finish with the future creation of C API
Working Group.</p>
<img alt="Psyche Revived by Cupid's Kiss" src="https://vstinner.github.io/images/amour_psychee.jpg" />
<p>Photo: <em>Psyche Revived by Cupid's Kiss …</em></p></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/cpython.html" rel="category">cpython</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/c-api.html" rel="tag">c-api</a>
	</span>
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/contrib-python-july-2023.html">
		<h2 itemprop="name headline">My contributions to Python (July 2023)</h2>
	</a>
	<time datetime="2023-07-08T23:00:00+02:00" itemprop="datePublished">Sat 08 July 2023</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><p>In 2023, between May 4 and July 8, I made 144 commits in the Python main
branch. In this article, I describe the most important Python contributions
that I made to Python 3.12 and Python 3.13 in these months.</p>
<a class="reference external image-reference" href="https://twitter.com/foxes_in_love/status/1668558475490742277"><img alt="Foxes in Love: Cuddle" src="https://vstinner.github.io/images/foxes_in_love_cuddle.jpg" /></a>
<p><em>Drawing: Foxes in Love: Cuddle</em></p>
<div class="section" id="summary">
<h2>Summary</h2>
<ul class="simple">
<li>Add PyImport_AddModuleRef() and …</li></ul></div></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/cpython.html" rel="category">cpython</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/c-api.html" rel="tag">c-api</a>
	</span>
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/c-api-convert-macros-functions.html">
		<h2 itemprop="name headline">Convert macros to functions in the Python C API</h2>
	</a>
	<time datetime="2022-12-12T23:00:00+01:00" itemprop="datePublished">Mon 12 December 2022</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><a class="reference external image-reference" href="https://www.exemplaire-editions.fr/librairie/livre/loeil-du-cyclone"><img alt="L'oeil du cyclone - Théo Grosjean" src="https://vstinner.github.io/images/loeil_cyclone.jpg" /></a>
<p><em>Drawing: &quot;L'oeil du cyclone&quot; by Théo Grosjean.</em></p>
<div class="section" id="convert-macros-to-functions">
<h2>Convert macros to functions</h2>
<p>For 4 years, between Python 3.7 (2018) and Python 3.12 (2022), I made many
changes on macros in the Python C API to make the API less error prone (avoid
<a class="reference external" href="https://gcc.gnu.org/onlinedocs/cpp/Macro-Pitfalls.html">macro pitfalls</a>) and
better define the API …</p></div></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/cpython.html" rel="category">cpython</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/c-api.html" rel="tag">c-api</a>
	</span>
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/debug-python-refleak.html">
		<h2 itemprop="name headline">Debug a Python reference leak</h2>
	</a>
	<time datetime="2022-11-04T13:00:00+01:00" itemprop="datePublished">Fri 04 November 2022</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><a class="reference external image-reference" href="https://twitter.com/djamilaknopf/status/1587441869403099136"><img alt="Childhood memories in the countryside" src="https://vstinner.github.io/images/refleak.jpg" /></a>
<p>This morning, I got <a class="reference external" href="https://mail.python.org/archives/list/buildbot-status&#64;python.org/message/MU2EJRTFF4ZCYTDXYER7KCL3IQUM5F3T/">this email</a>
from the buildbot-status mailing list:</p>
<blockquote>
The Buildbot has detected a new failure on builder PPC64LE Fedora Rawhide
<strong>Refleaks</strong> 3.x while building Python.</blockquote>
<p>I get many of buildbot failures per month (by email), but I like to debug
reference leaks: they are more challenging …</p></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/cpython.html" rel="category">cpython</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/refleak.html" rel="tag">refleak</a>
	</span>
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/c-api-abstract-pyobject.html">
		<h2 itemprop="name headline">Python C API: Add functions to access PyObject</h2>
	</a>
	<time datetime="2021-10-05T14:00:00+02:00" itemprop="datePublished">Tue 05 October 2021</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><a class="reference external image-reference" href="https://twitter.com/Kekeflipnote/status/1433139994516934663"><img alt="A spider in my bedroom" src="https://vstinner.github.io/images/spider.png" /></a>
<p>The PyObject structure prevents indirectly to optimize CPython. We will see why
and how I prepared the C API to make this structure opaque. It took me 1 year
and a half to add functions and to introduce <strong>incompatible C API changes</strong>
(fear!).</p>
<p>In February 2020, I started by adding …</p></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/cpython.html" rel="category">cpython</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/c-api.html" rel="tag">c-api</a>
	</span>
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/c-api-python3_10-changes.html">
		<h2 itemprop="name headline">C API changes between Python 3.5 to 3.10</h2>
	</a>
	<time datetime="2021-10-04T15:00:00+02:00" itemprop="datePublished">Mon 04 October 2021</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><img alt="Homer Simpson hiding" src="https://vstinner.github.io/images/homer_hiding.webp" />
<p>I'm trying to enhance and to fix the Python C API for 5 years. My first goal
was to shrink the C API without breaking third party C extensions. I hid many
private functions from the public functions: I moved them to the &quot;internal C
API&quot;. I also deprecated and …</p></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/cpython.html" rel="category">cpython</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/c-api.html" rel="tag">c-api</a>
	</span>
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="https://vstinner.github.io/pythoncapi_compat.html">
		<h2 itemprop="name headline">Creation of the pythoncapi_compat project</h2>
	</a>
	<time datetime="2021-03-30T20:00:00+02:00" itemprop="datePublished">Tue 30 March 2021</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">Victor Stinner</span>
	</span>
	<div class="summary"><a class="reference external image-reference" href="https://twitter.com/Kekeflipnote/status/1378034391872638980"><img alt="Strange Cat by Kéké" src="https://vstinner.github.io/images/strange_cat.jpg" /></a>
<p>In 2020, I created a new <a class="reference external" href="https://github.com/pythoncapi/pythoncapi_compat">pythoncapi_compat project</a> to add Python 3.10 support
to C extensions without losing support for old Python versions. It supports
Python 2.7-3.10 and PyPy 2.7-3.7. The project is made of two parts:</p>
<ul class="simple">
<li><tt class="docutils literal">pythoncapi_compat.h</tt>: Header file providing new C API …</li></ul></div>
	Category:
	<span itemprop="articleSection">
		<a href="https://vstinner.github.io/category/cpython.html" rel="category">cpython</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/c-api.html" rel="tag">c-api</a>
	</span>
	<span itemprop="keywords">
		<a href="https://vstinner.github.io/tag/cpython.html" rel="tag">cpython</a>
	</span>
</div>
<hr>
 <div class="pagination">
<ul>
    <li class="prev disabled"><a href="#">&larr; Previous</a></li>

    <li class="active"><a href="https://vstinner.github.io/index.html">1</a></li>
    <li class=""><a href="https://vstinner.github.io/index2.html">2</a></li>
    <li class=""><a href="https://vstinner.github.io/index3.html">3</a></li>
    <li class=""><a href="https://vstinner.github.io/index4.html">4</a></li>
    <li class=""><a href="https://vstinner.github.io/index5.html">5</a></li>
    <li class=""><a href="https://vstinner.github.io/index6.html">6</a></li>
    <li class=""><a href="https://vstinner.github.io/index7.html">7</a></li>
    <li class=""><a href="https://vstinner.github.io/index8.html">8</a></li>

    <li class="next"><a href="https://vstinner.github.io/index2.html">Next &rarr;</a></li>

</ul>
</div> 		</div>
	</div> 	<!-- <hr> -->
</div> <!-- /container -->
<footer class="aw-footer bg-danger">
	<div class="container"> <!-- footer -->
		<div class="row">
			<div class="col-md-10 col-md-offset-1">
				<div class="row">
					<div class="col-md-3">
						<h4>Navigation</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="https://vstinner.github.io">Victor Stinner blog 3</a></li>
							<li><a href="https://vstinner.github.io/feeds/all.atom.xml" type="application/atom+xml"><i class="fa fa-rss "></i> atom</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Author</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="https://twitter.com/VictorStinner">Follow @VictorStinner on Twitter</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Categories</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="https://vstinner.github.io/category/benchmark.html">benchmark (8)</a></li>
							<li><a href="https://vstinner.github.io/category/cpython.html">cpython (23)</a></li>
							<li><a href="https://vstinner.github.io/category/linux.html">linux (2)</a></li>
							<li><a href="https://vstinner.github.io/category/python.html">python (41)</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Links</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="http://vstinner.readthedocs.org/">Victor Stinner's Notes</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</footer>
<div class="container">
	<div class="row">
		<div class="col-md-12 text-center center-block aw-bottom">
			<p>&copy; Victor Stinner 2016</p>
			<p>Powered by Pelican</p>
		</div>
	</div>
</div>
<!-- JavaScript -->
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
	$("div.collapseheader").click(function () {
		$header = $(this).children("span").first();
		$codearea = $(this).children(".input_area");
		$codearea.slideToggle(500, function () {
			$header.text(function () {
				return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
			});
		});
	});
});
</script>
</body>
</html>